
 # datovy protokol
 
nasledujici dokument popisuje struktury datoveho protokolu.
Kazdy paket ma na zacatku dva byty 
```
[FULL_LENGTH_MESSAGE][COMMUNICATION_OP_CODE]
```
Dale jsou popsany pakety o delkach 62. 
Pokud je zapotrebi data rozdelit dela se to nasledujicim zpusobem.


LONG REQUEST
```
[OP+TYPE_REQUEST+PART_CONTINUE][ITER]{ARGS1}
[OP+TYPE_REQUEST+PART_CONTINUE][ITER]{ARGS2}
[OP+TYPE_REQUEST+PART_LAST][ITER]{ARGS3}
```


LONG RESPONSE
```
[OP+TYPE_RESPONSE+PART_CONTINUE][ITER]{ARGS1}
[OP+TYPE_RESPONSE+PART_CONTINUE][ITER]{ARGS2}
[OP+TYPE_RESPONSE+PART_LAST][ITER]{ARGS3}
```


LONG DOWNLOAD
```
[TYPE_DOWNLOAD+PART_CONTINUE][ITER]{DATA1}
[TYPE_DOWNLOAD+PART_CONTINUE][ITER]{DATA2}
[TYPE_DOWNLOAD+PART_LAST][ITER]{DATA3}
```

LONG UPLOAD
```
[TYPE_UPLOAD+PART_CONTINUE][ITER]{DATA1}
[TYPE_UPLOAD+PART_CONTINUE][ITER]{DATA2}
[TYPE_UPLOAD+PART_LAST][ITER]{DATA3}
```


## definice paketu
Nasledujici definice nepopisuji jak se zpravy deli do paketu, je zapotrebi zkombinovat s definici nahore.



 HELLO
 
```
 [OP_HELLO+TYPE_REQUEST][ITER][HELLO_VER]{NAME}[0]
```
 
 HELLO_RESPONSE
```
 [OP_HELLO+TYPE_RESPONSE][ITER][RESPONSE_OK]{NAME}[0]
``` 
BYE
```
 [OP_BYE+TYPE_REQUEST][ITER]
 ```
BYE_RESPONSE
```
[OP_BYE+TYPE_RESPONSE][ITER][RESPONSE_OK]
```
 MD
```
[OP_MD+TYPE_REQUEST][ITER]{DIR_PATH}[0]
```
 MD_RESPONSE
```
[OP_MD+TYPE_RESPONSE][ITER][RESPONSE_OK]
or
[OP_MD+TYPE_RESPONSE][ITER][RESPONSE_MD_DIR_EXIST]
or
[OP_MD+TYPE_RESPONSE][ITER][RESPONSE_MD_FAIL]
```
   
 LS
 
 ```
 [OP_LS+TYPE_REQUEST][ITER][FLAGS]{DIR_PATH}[0]{MASK}[0]
 ```
 
 LS_RESPONSE
 ```
 [OP_LS+TYPE_RESPONSE][ITER][RESPONSE_OK][4:DATA_SIZE][16:DATA_MD5]
 [TYPE_DOWNLOAD][ITER][2:COUNT][4:FILE1_SIZE][16:FILE1_MD5]{FILE1_NAME}[0][4:FILE2_SIZE][16:FILE2_MD5]{FILE2_NAME}[0]...
 or 
 [OP_LS+TYPE_RESPONSE][ITER][RESPONSE_LS_DIR_NOT_FOUND]
 ```
 
  GET
  
  ```
  [OP_GET+TYPE_REQUEST][ITER]{FILE_PATH}[0]
  ```
 
 GET_RESPONSE
  ```
  [OP_GET+TYPE_RESPONSE][ITER][RESPONSE_OK][4:DATA_SIZE][16:DATA_MD5]
  [TYPE_DOWNLOAD][ITER]{FILE_BYTES}
  or
  [OP_GET+TYPE_RESPONSE][ITER][RESPONSE_GET_FILE_NOT_FOUND]
  ```
  
 GET_PREVIEW
  ```
  [OP_GET_PREVIEW+TYPE_REQUEST][ITER]{FILE_PATH}[0]
  ```
   
 GET_PREVIEW_RESPONSE
 ```
 [OP_GET_PREVIEW+TYPE_RESPONSE][ITER][RESPONSE_OK][4:DATA_SIZE][16:DATA_MD5]
 [TYPE_DOWNLOAD][ITER]{PREVIEW_FILE_BYTES}
 ```
 
 PUT
 ```
 [OP_PUT+TYPE_REQUEST][ITER][4:DATA_SIZE][16:DATA_MD5]{FILE_PATH}[0]
 [TYPE_UPLOAD][ITER]{FILE_BYTES}
 ```
 PUT_RESPONSE
 ```
 [OP_PUT+TYPE_RESPONSE][ITER][RESPONSE_OK]
 or
 [OP_PUT+TYPE_RESPONSE][ITER][RESPONSE_PUT_MD5_FAIL]
 ```  
 
 DEL
 ```
 [OP_DEL+TYPE_REQUEST][ITER]{FILE_PATH}[0]
 ```
 DEL_RESPONSE
 ```
 [OP_DEL+TYPE_RESPONSE][ITER][RESPONSE_OK]
 or
 [OP_DEL+TYPE_RESPONSE][ITER][RESPONSE_DEL_FAIL]
 ```  
 START
 ```
 [OP_START+TYPE_REQUEST][ITER]{CONFIG_PATH}[0]
 ```
 START_RESPONSE
 ```
 [OP_START+TYPE_RESPONSE][ITER][RESPONSE_OK]
 ```
 STOP
 ```
 [OP_STOP+TYPE_REQUEST][ITER]
 ```
 STOP_RESPONSE
 ```
 [OP_STOP+TYPE_RESPONSE][ITER][RESPONSE_OK]
 ```
 
 